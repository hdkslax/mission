[TOC]



# NTFS安全权限

### 一、NTFS权限概述  

1、通过设置NTFS权限，实现不同的用户访问不同的权限
2、分配了正确的访问权限后，用户才能访问其资源
3、设置权限防止资源被篡改、删除  

### 二、文件系统概述  

文件系统即在外部存储设备上组织文件的方法
常用的文件系统：  

- FAT 	windows
- NTFS   windows
- EXT      Linux常见

新建一个分区之后，不建立文件系统，是无法存储数据的。

建立文件系统就像是在存储设备上打格子，不同的文件系统，打格子的方法不同，这个格子就是存储单元，也就是文件系统。

格式化 - 把数据全部抹掉，再重新打格子。

存储单元 - 格子，簇，block

每个分区都有一块很小的区域没有被打格子，但是存储了一个目录，叫做inote，里面写了文件名，文件名是指针，指向该文件所对应的内存区域。

一个格子（block）只能被一个文件用，就算这个文件没占满，也不能被其他格子用了。

格子越小 - 格子利用率越高，但因为指针变多，效率变差。

所以应该根据该分区将要装什么文件来分块，若要装大文件则分大块，小文件则分小块。



FAT转换为NTFS： 

```
convert 盘符: /fs:ntfs #数据不丢失，但不可逆！  
```



![文件系统](img\NTFS安全权限1.png)

![分配单元大小](img\NTFS安全权限2.png)

### 三、NTFS文件系统特点  

1. 提高磁盘读写性能
2. 可靠性
   1. 加密文件系统
   2. 访问控制列表（设置权限）- 可以设置谁能访问，谁不能访问。FAT不具备
3. 磁盘利用率
   1. 压缩
   2. 磁盘配额 - 为不同的用户限制使用空间。e.g.用户A只能用2G的空间
4. 支持单个文件大于4G

![image-20210318111756112](img\NTFS安全权限3.png)

### 四、修改NTFS权限  

###### 4.1、取消权限继承  

作用：取消后，可以任意修改权限列表了。
方法：文件夹右键属性---安全---高级---去掉第一个对号--选择复制即可  

![image-20210318114116448](img\NTFS安全权限4.png)

###### 4.2、文件及文件夹权限  

| 文件权限   | 权限内容                                     |
| ---------- | -------------------------------------------- |
| 完全控制   | 拥有读取、写入、修改、删除文件、及特殊的权限 |
| 修改       | 拥有读取、写入、修改、删除文件的权限         |
| 读取和执行 | 拥有读取、及执行文件的权限                   |
| 读取       | 拥有读取文件的权限（打开文件看内容）         |
| 写入       | 拥有修改文件内容的权限                       |
| 特殊权限   | 控制文件权限列表的权限                       |

| 文件夹权限     | 权限内容                                                   |
| -------------- | ---------------------------------------------------------- |
| 完全控制       | 拥有对文件及文件夹读取、写入、修改、删除文件、及特殊的权限 |
| 修改           | 拥有对文件及文件夹读取、写入、修改、删除文件的权限         |
| 读取和执行     | 拥有对文件夹中的文件下载、读取、及执行的权限               |
| 列出文件夹内容 | 可以列出文件夹的内容                                       |
| 读取           | 拥有对文件夹中的文件下载、读取的权限                       |
| 写入           | 拥有在文件夹中创建新的文件的权限                           |
| 特殊权限       | 控制文件夹权限列表的权限                                   |

> 案例：
> 建立test public documents文件夹，并设置NTFS权限，要求a用户只能读取文件夹中的文件，不能在test public documents文件夹中创建新的文件，b用户只能在test public documents文件夹中创建新的文件，不能读取文件。  

- 特别的权限 - 对用户的权限的控制权限

![image-20210318115651423](img\NTFS安全权限5.png)

![image-20210318120004663](img\NTFS安全权限6.png)

没有修改权限的话，删除文件或文件夹会报错：

![image-20210318120427107](img\NTFS安全权限7.png)

###### 4.3、权限累加  

当用户同时属于多个组时，权限是累加的!  

注意： 权限可以累加，某用户的权限 = 该用户的权限+该用户所在的所有组的权限。

> 案例：
> 用户a同时属于IT组与HR组，IT组对文件夹jimi可以读取，HR组可以对jimi文件夹写入，则a用户最终的权限为读取和写
> 入。  

###### 4.4、拒绝最大  

当用户权限累加时，如遇到拒绝权限，拒绝最大 ！

> 案例：
> 用户a属于财务部组，财务部组成员为10个用户，财务部组拥有对文件夹xxx访问权限，现要求a用户不能脱离财务部组，
> 同时要求a没有访问文件夹xxx的权限。  

###### 4.5、取得所有权  

默认只有administrator有这个权限！
作用：可以将任何文件夹的所有者改为administrator  

> 案例：
> 用户a已离职，但xxx文件夹的属主是a，由于a用户对xxx文件夹做过权限修改，导致其他用户对xxx文件夹没有任何权
> 限，现需要管理员administrator用户将xxx文件夹重新修改权限。  

###### 4.6、强制继承  

作用：对下强制继承父子关系！
方法：文件夹右键属性--安全--高级--勾上第二个对号，即可！  

> 案例：
> xxx文件夹下有多个子文件夹及文件，由于长时间的权限管理，多个子文件夹的权限都做过不同的权限修改，现需要xxx
> 下的所有子文件及文件夹的权限全部统一 。

###### 4.7、文件复制对权限的影响  

文件复制后，文件的权限会被目标文件夹的权限覆盖。  

文件移动后，同分区文件的权限保持原有，不同分区文件权限被覆盖。