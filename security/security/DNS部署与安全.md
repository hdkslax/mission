# DNS部署与安全

### 1. DNS

*Domain Name System* 域名系统

作用：为客户机提供域名解析服务



### 2. 域名组成

##### 2.1 域名组成概述

如：“www.sina.com.cn”是一个域名，从严格意义上讲，“sina.com.cn”才被称为域名(全球唯一)，而“www”是主机名。

“主机名.域名”称为完全限定域名(FQDN = *fully qualified domain name*)。一个域名下可以有多个主机，域名全球唯一，那么“主机名.域名”肯定也是全球唯一。

以“sina.com.cn”域名为例，一般管理员在命名其主机的时候会根据其主机的功能而命名。

- 网站的是www，对应的FQDN为www.sina.com.cn
- 博客的是blog，对应的FQDN为blog.sina.com.cn
- 论坛的是bbs，对应的FQDN为bbs.sina.com.cn

这么多个FQDN，然而我们只需要申请一个域名即sina.com.cn即可

##### 2.2 域名组成

###### 树形结构

![image-20210501233824689](img/image-20210501233824689.png)

- 根域 .
- 顶级域
  - 国家顶级域 cn, jp, hk, uk
  - 商业顶级域 
    - com 商业机构
    - gov 政府机构
    - mil 军事机构
    - edu 教育机构
    - org 民间组织架构
    - net 互联网
- 一级域名
- 二级域名
- …

```
如：www.baidu.com. #浏览器会自动加最后那个.(根域)
.为根域
.com为顶级域
baidu为一级域名
www为主机名
```

FQDN=主机名.DNS后缀
FQDN（完整合格的域名）  



### 3. 监听端口

```
TCP 53
UDP 53
```



### 4. DNS解析种类

##### 4.1 按照查询方式分类

```
1）递归查询：客户机与本地DNS服务器之间
2）迭代查询：本地DNS服务器与根等其他DNS服务器的解析过程
```

![image-20210501234414266](img/image-20210501234414266.png)

- 递归查询 - 所问即所答
- 迭代查询 - 所问非所答
- 全世界目前只有13台服务器
- 任何一台DNS服务器，都要知道那13台根服务器
- 若服务器搭建了DNS转发器，先查询本地缓存，若无记录，则转发给另一台DNS服务器
  - 转发器的过程叫递归解析



##### 4.2 按照查询内容分类

- 正向解析：已知域名，解析IP地址
- 反向解析：已知IP地址，解析域名